<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/0.3.0/aframe.js"></script>
    <script src="https://cdn.rawgit.com/AltspaceVR/aframe-altspace-component/master/dist/aframe-altspace-component.js"></script>
    <script src="https://sdk.altvr.com/libs/altspace.js/0.24.4/altspace.js"></script>
    <title>BeatLab!</title>
</head>
<body>


<a-scene debug altspace='vertical-align: bottom;'>

    <a-assets>
        <img id="noise-texture" src="img/noisetexture.png">
        <img id="stripe-texture" src="img/Noise_Stripes_03.jpg">
        <img id="galv-texture" src="img/galvanised.jpg">
        <img id="copper-texture" src="img/copper.jpg">
        <img id="green-texture" src="img/green.jpg">
        <img id="crackles-texture" src="img/crackles.jpg">
        <img id="rock-texture" src="img/lava2.jpg">
        <img id="cloud-texture" src="img/cloud2.jpg">
        <img id="stain-texture" src="img/texture1.jpg">
        <img id="tongue-texture" src="img/tongue.jpg">
    </a-assets>

    <a-entity id="beater" beat></a-entity>

    <a-cylinder material="src:#galv-texture;" height="0.9" position="0 0.5 0" radius="0.3"></a-cylinder>

    <a-cylinder material="src:#stripe-texture;" height="0.05" rotation="-135 0 0" position="0 1.3 0" radius="0.4" side="double"></a-cylinder>

    <a-cylinder material="src:#noise-texture; repeat:5 5" height="0.06" rotation="-135 0 0" position="0 1.3 0" geometry="radius: 0.3" color="#222" side="double" animate-theta="" beat-listener="src:#beater" time-listener="src:#beater"></a-cylinder>

    <a-circle bpm-label radius="0.4" scale="0.5 0.5 0.5" color="#999" side="both" position="0 1.33 0.05" rotation="-45 0 0" n-text="fontSize:1pt;width:0.5;height:0.1"></a-circle>

    <a-sphere id="kick" flash="on:play; from:#6688ff; to:#fff; delay:150; dur:50"
              n-sound="src:audio/kick.WAV; on:play; oneshot:true;"
              material="src:#noise-texture; repeat:5 5; color: #6688ff" position="1 1 1.5" radius="0.3" time-listener="src:#beater;beat: 0, 1, 2, 3 ;seg: 0, 0, 0, 0">
        <a-animation attribute="scale" from="1 1 1" to="1.1 1.1 1.1" fill="none" begin="play" dur="200" easing="ease-in"></a-animation>
    </a-sphere>

    <a-entity cable="#kick"></a-entity>


    <a-box id="hat" depth="0.5" height="0.5" width="0.5" flash="on:play; from:#ff6688; to:#fff; delay:150; dur:50"
           n-sound="src:audio/hat.WAV; on:play; oneshot:true;"
           material="src:#copper-texture;color: #ff6688" position="-1 1 1.5" time-listener="src:#beater;beat: 0, 1, 2, 3;seg: 7, 7, 7, 7">
        <a-animation attribute="scale" from="1 1 1" to="1.1 1.1 1.1" fill="none" begin="play" dur="200" easing="ease-in"></a-animation>
    </a-box>

    <a-entity cable="#hat"></a-entity>

    <a-tetrahedron id="snare" rotation="215 45 45" radius="0.6" flash="on:play; from:#b0d8b0; to:#fff; delay:150; dur:50"
                   n-sound="src:audio/snare.WAV; on:play; oneshot:true;"
                   material="src:#green-texture;color:#b0d8b0" position="-1.7 1 -0.8" time-listener="src:#beater;beat: 2, 2, 3;seg: 3, 11, 0">
        <a-animation attribute="scale" from="1 1 1" to="1.1 1.1 1.1" fill="none" begin="play" dur="200" easing="ease-in"></a-animation>
    </a-tetrahedron>

    <a-entity cable="#snare"></a-entity>


    <a-cylinder id="bork" height="1" radius="0.08" position="0 1.2 -1.5" material="src:#stain-texture"></a-cylinder>
    <a-sphere n-sound="src:audio/bork.WAV; on:play;" material="src:#tongue-texture;color:#aaf"
              position="0 1 -1.5" radius="0.15" time-listener="src:#beater;beat: 0, 0, 3;seg: 0, 7, 7">
        <a-animation attribute="position" from="0 0.9 -1.5" to="0 1.6 -1.5" begin="play" dur="200" fill="none" easing="ease-in-out"></a-animation>
    </a-sphere>

    <a-entity cable="#bork"></a-entity>

    <a-cone id="beep" height="0.7" radius-top="0.2" radius-bottom="0.38" open-ended="true" flash="on:play; from:#ffc34e; to:#fff; delay:150; dur:50"
            n-sound="src:audio/beep.wav; on:play; oneshot:true;"
            material="src:#rock-texture;side:double" position="1.7 1.1 -0.8" time-listener="src:#beater;beat: 3, 3, 3;seg: 0, 7, 11;">
    </a-cone>

    <a-entity cable="#beep"></a-entity>


    <a-torus radius="0.15" rotation="90 0 0" radius-tubular="0.029" position="1.7 1.3 -0.8" material="src:#cloud-texture;color:#ffe8c0;" time-listener="src:#beater;beat: 2, 3;seg:0, 0;">
        <a-animation attribute="position" from="1.7 1.3 -0.8" to="1.7 3 -0.8" begin="play" dur="500" fill="none" easing="linear"></a-animation>
    </a-torus>

</a-scene>


<script src="script/main.js"></script>

</body>
</html>